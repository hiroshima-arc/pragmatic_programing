:toc: left
:toclevels: 5
:sectnums:
= The Money Example

== 仕様

既存レポート

|====================
|銘柄|株数|価格|合計|
|IBM |1000|25  |25000|
|GE  |400 |100 |40000|
|    |    |総計 |65000|
|====================

レポートを多国籍通貨対応させるために、通貨の情報を加えなければならない。

|====================
|銘柄       |株数  |価格  |合計  |
|IBM       |1000|25 USD  |25000 USD|
|Novartis  |400 |150 CHF |60000 CHF|
|          |    |総計 |65000 USD|
|====================

加えて、為替レートも規定しなければならない

|====================
|換算元|換算先|レート|
|CHF|USD|1.5|
|====================

[quote]
----
テスト駆動開発 第1章 仮実装より
----

== 設計

=== TODOリスト

* [x] $5 + 10 CHF = $10(レートが2:1の場合)
* [x] $5 + $5 = $10
* [x] $5 + $5がMoneyを返す
* [x] Bank.reduce(Money)
* [x] Moneyを変換して換算を行う
* [x] Reduce(Bank, String)
* [x] Sum.plus
* [x] Expression.times
* [ ] レポートを画面に表示する
* [ ] 為替レートを画面で新規追加する
* [ ] 為替レートを画面で更新する
* [ ] 為替レートを画面で削除する

=== ユースケース図

=== クラス図
[plantuml]
----
class Expression {
  times(multiplier)
  plus(addend)
  reduce(bank, to)
}
class Sum {
  augend: Expression
  addend: Expression
  times(multiplier): Expression
  reduce(to): Money
  plus(added): Expression
}
class Bank {
  rates: Map
  reduce(source, to): Money
  addRate(from, to, rate): void
  rate(from, to): int
}
class Pair {
  from: String
  to: String
  equlas(object): boolean
  hashCode(): int
  toString(): String
}
class Money {
  amount: int
  currency() :String
  times(multiplier) :Money
  plus(addend) :Expression
  equals(object) :boolean
  reduce(to) :Money
  {static} dollar(amount): Dollar
  {static} franc(amount): Franc
}
Expression <|.. Money
Expression <|.. Sum
Money <- Sum
Sum <- Bank
Bank -> Pair
----


=== シーケンス図

== 開発

include::../../../src/page/index.html[]

== 参照

* https://www.amazon.co.jp/%E3%83%86%E3%82%B9%E3%83%88%E9%A7%86%E5%8B%95%E9%96%8B%E7%99%BA-Kent-Beck/dp/4274217884/ref=sr_1_1?hvadid=335138641345&hvdev=c&jp-ad-ap=0&keywords=%E3%83%86%E3%82%B9%E3%83%88%E9%A7%86%E5%8B%95%E9%96%8B%E7%99%BA&qid=1574297266&sr=8-1[テスト駆動開発]
