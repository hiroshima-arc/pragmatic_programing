<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />

    <title>アプリケーションプログラマのための練習プログラム集</title>
  </head>
  <body>
    <!-- ヘッダー -->
    <header class="py-4"></header>
    <!-- /ヘッダー -->
    <div class="container text-center">
      <h1>アプリケーションプログラマのための練習プログラム集</h1>
    </div>
    <!-- ナビゲーションバー -->
    <div id="navbar"></div>
    <!-- /ナビゲーションバー -->
    <!-- メイン -->
    <main>
      <!-- コンテンツ01 -->
      <div class="py-4">
        <section id="app-dev">
          <div class="container">
            <div class="row">
              <h2>TheMoneyExample</h2>
            </div>
            <div class="row p-3">
              <!-- 左側カラム（画面幅md以上）　-->
              <div class="col-md-2">
                <h3>仕様</h3>
              </div>
              <!-- 右側カラム（画面幅md以上） -->
              <div class="col-md-10">
                <p>
                  通貨の異なる２つの金額を足し、通貨間の為替レートに基づいて換算された金額を得る。
                </p>
                <p>
                  金額（通貨単位あたりの額）に数値（通貨単位数）を掛け、金額を得る。
                </p>
              </div>
            </div>
            <div class="row p-3">
              <!-- 左側カラム（画面幅md以上）　-->
              <div class="col-md-2">
                <h3>ToDoリスト</h3>
              </div>
              <!-- 右側カラム（画面幅md以上） -->
              <div class="col-md-10">
                <ul>
                  <li>$5 + $10CHF = $10(レートが2:1の場合)</li>
                  <li><del>$5 * 2 = $10</del></li>
                </ul>
              </div>
            </div>
          </div>
        </section>
      </div>
      <!-- /コンテンツ01 -->
    </main>
    <!-- /メイン -->
    <!-- フッター -->
    <div id="footer"></div>
    <!-- /フッター -->
    <div id="dev">
      <section id="mocha"></section>
      <!-- Optional JavaScript -->
      <!-- jQuery first, then Popper.js, then Bootstrap JS -->
      <script
        src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"
      ></script>
      <script
        src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"
      ></script>
      <script
        src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"
      ></script>
      <script src="https://cdn.rawgit.com/mochajs/mocha/2.2.5/mocha.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/chai/4.2.0/chai.min.js"></script>
      <script>
        mocha.setup("tdd");
      </script>
      <script>
        const assert = chai.assert;
        suite("MoneyTest", () => {
          test("Multiplication", () => {
            const five = Money.dollar(5);
            assert.isOk(Money.dollar(10).equals(five.times(2)));
            assert.isOk(Money.dollar(15).equals(five.times(3)));
          });

          test("Equality", () => {
            assert.isOk(Money.dollar(5).equals(Money.dollar(5)));
            assert.isNotOk(Money.dollar(5).equals(Money.dollar(6)));
            assert.isNotOk(Money.franc(5).equals(Money.dollar(5)));
          });

          test("Currency", () => {
            assert.equal("USD", Money.dollar(1).currency());
            assert.equal("CHF", Money.franc(1).currency());
          });

          test("SimpleAddition", () => {
            const sum = Money.dollar(5).plus(Money.dollar(5));
            assert.isOk(Money.dollar(10).equals(sum));
          });
        });

        class Money {
          constructor(amount, currency) {
            this._amount = amount;
            this._currency = currency;
          }

          get amount() {
            return this._amount;
          }

          times(multiplier) {
            return new Money(this._amount * multiplier, this._currency);
          }

          plus(addend) {
            return new Money(this._amount + addend.amount, this._currency);
          }

          currency() {
            return this._currency;
          }

          equals(object) {
            const money = object;
            return (
              this._amount === money._amount &&
              this._currency === money._currency
            );
          }

          toString() {
            return this._amount + " " + this._currency;
          }

          static dollar(amount) {
            return new Money(amount, "USD");
          }

          static franc(amount) {
            return new Money(amount, "CHF");
          }
        }
      </script>
      <script>
        mocha.globals(["jQuery"]);
        mocha.run();
      </script>
    </div>
  </body>
</html>
